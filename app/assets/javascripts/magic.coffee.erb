ready = ->

  toggleNav = ->
    if $('.navigation').hasClass('show')
      # Do things on Nav Close
      $('.navgation').removeClass 'show'
     
    else
      # Do things on Nav Open
      $('.navigation').addClass 'show'
      if $(window).width() >= 1200
        $('#jquery_jplayer_menu').jPlayer('play');
    return

  switchVideo = (section) ->
    switch section
      when "home"
        videom4v = "<%= asset_path('intro.m4v') %>"
        videowebm = "<%= asset_path('intro.webm') %>"
        videojpg = "<%= asset_path('intro.jpg') %>"
        $('#jquery_jplayer_1').jPlayer
          ready: ->
            $(this).jPlayer('setMedia',
              m4v: videom4v
              webmv: videowebm
              poster: videojpg).jPlayer 'play'
            return
          swfPath: '/js'
          supplied: 'webmv, m4v'
          loop: true
          muted: true
          preload: 'auto'

        $('#jquery_jplayer_1').bind $.jPlayer.event.ended, (event) ->
          $('.toggle-nav').click()
          $('#jquery_jplayer_menu').jPlayer 'play'
          return

      when "about"
        videom4v = "<%= asset_path('about.m4v') %>"
        videowebm = "<%= asset_path('about.webm') %>"
        videojpg = "<%= asset_path('about.jpg') %>"
        $('#jquery_jplayer_1').jPlayer
          ready: ->
            $(this).jPlayer('setMedia',
              m4v: videom4v
              webmv: videowebm
              
              poster: videojpg).jPlayer 'play'
            return
          swfPath: '/js'
          supplied: 'webmv, m4v'
          loop: true
          muted: true
          preload: 'auto'

      when "collections"
        videom4v = "<%= asset_path('collections.m4v') %>"
        videowebm = "<%= asset_path('collections.webm') %>"
        videojpg = "<%= asset_path('collections.jpg') %>"
        $('#jquery_jplayer_1').jPlayer
          ready: ->
            $(this).jPlayer('setMedia',
              m4v: videom4v
              webmv: videowebm
              
              poster: videojpg).jPlayer 'play'
            return
          swfPath: '/js'
          supplied: 'webmv, m4v'
          loop: true
          muted: true
          preload: 'auto'

      when "stylings"
        videom4v = "<%= asset_path('stylings.m4v') %>"
        videowebm = "<%= asset_path('stylings.webm') %>"
        videojpg = "<%= asset_path('stylings.jpg') %>"
        $('#jquery_jplayer_1').jPlayer
          ready: ->
            $(this).jPlayer('setMedia',
              m4v: videom4v
              webmv: videowebm
              
              poster: videojpg).jPlayer 'play'
            return
          swfPath: '/js'
          supplied: 'webmv, m4v'
          loop: true
          muted: true
          preload: 'auto'

      when "interiors"
        videom4v = "<%= asset_path('interior.m4v') %>"
        videowebm = "<%= asset_path('interior.webm') %>"
        videojpg = "<%= asset_path('interiors.jpg') %>"
        $('#jquery_jplayer_1').jPlayer
          ready: ->
            $(this).jPlayer('setMedia',
              m4v: videom4v
              webmv: videowebm
              
              poster: videojpg).jPlayer 'play'
            return
          swfPath: '/js'
          supplied: 'webmv, m4v'
          loop: true
          muted: true
          preload: 'auto'

      when "releases"
        videom4v = "<%= asset_path('releases.m4v') %>"
        videowebm = "<%= asset_path('releases.webm') %>"
        videojpg = "<%= asset_path('releases.jpg') %>"
        $('#jquery_jplayer_1').jPlayer
          ready: ->
            $(this).jPlayer('setMedia',
              m4v: videom4v
              webmv: videowebm
              
              poster: videojpg).jPlayer 'play'
            return
          swfPath: '/js'
          supplied: 'webmv, m4v'
          loop: true
          muted: true
          preload: 'auto'
          
    return    

  menuAnimation = ->
    menuvideom4v = "<%= asset_path('menu.m4v') %>"
    menuvideowebm = "<%= asset_path('menu.webm') %>"
    menuvideojpg = "<%= asset_path('menu.jpg') %>"
    $('#jquery_jplayer_menu').jPlayer
      ready: ->
        $(this).jPlayer('setMedia',
          m4v: menuvideom4v
          webmv: menuvideowebm
          poster: menuvideojpg)
        return
      swfPath: '/js'
      supplied: 'webmv, m4v'
      loop: true
      muted: true
      preload: 'auto'

  $ ->
    section = $('body').attr('id')
    switchVideo(section)
    menuAnimation()
    Turbolinks.pagesCached(0)

    $(document).on 'page:fetch', ->
      $('#primary-content').removeClass('loaded');
      $('#primary-content').addClass('waiting');
      $('.sc-player.playing a.sc-pause').click();
      return

    # Toggle Nav on Click
    $('.toggle-nav').click (event) ->
      # Calling a function in case you want to expand upon this.
      event.preventDefault()
      toggleNav()
      return
    return
    
    
$(document).ready(ready);
$(document).on('page:load', ready);
